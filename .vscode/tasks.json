{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Start Frontend & Backend",
      "detail": "Start Playground (Next.js) and workers (Cloudflare Workers) in parallel terminal windows",
      "dependsOn": ["Start Playground", "Start Workers"],
      "dependsOrder": "parallel",
      "presentation": {
        "panel": "new",
        "group": "dev",
        "reveal": "always",
        "clear": true
      }
    },
    {
      "label": "Start All Dev Services",
      "detail": "Start all dev services in one terminal window with turbo dev",
      "type": "shell",
      "command": "pnpm dev",
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "isBackground": true,
      "problemMatcher": [],
      "presentation": {
        "panel": "new",
        "group": "dev",
        "reveal": "always",
        "clear": true
      }
    },
    {
      "label": "Start Playground",
      "detail": "Start Playground dev server (Next.js)",
      "type": "shell",
      "command": "pnpm dev",
      "options": {
        "cwd": "${workspaceFolder}/apps/app"
      },
      "isBackground": true,
      "problemMatcher": [],
      "presentation": {
        "panel": "new",
        "group": "dev",
        "reveal": "always",
        "clear": true
      }
    },
    {
      "label": "Start Auth Worker",
      "detail": "Start auth worker dev server (Wrangler)",
      "type": "shell",
      "command": "pnpm dev",
      "options": {
        "cwd": "${workspaceFolder}/apps/workers/auth"
      },
      "isBackground": true,
      "problemMatcher": [],
      "presentation": {
        "panel": "new",
        "group": "dev",
        "reveal": "always",
        "clear": true
      }
    },
    {
      "label": "Start V0 Worker",
      "detail": "Start v0 worker dev server (Wrangler)",
      "type": "shell",
      "command": "pnpm dev",
      "options": {
        "cwd": "${workspaceFolder}/apps/workers/v0"
      },
      "isBackground": true,
      "problemMatcher": [],
      "presentation": {
        "panel": "new",
        "group": "dev",
        "reveal": "always",
        "clear": true
      }
    },
    {
      "label": "Start Workers",
      "detail": "Start auth + v0 workers in parallel",
      "dependsOn": ["Start Auth Worker", "Start V0 Worker"],
      "dependsOrder": "parallel",
      "presentation": {
        "panel": "new",
        "group": "dev",
        "reveal": "always",
        "clear": true
      }
    },
    {
      "label": "Generate Worker Auth Types",
      "detail": "Generate Cloudflare types for auth worker",
      "type": "shell",
      "command": "pnpm cf-typegen",
      "options": {
        "cwd": "${workspaceFolder}/apps/workers/auth"
      },
      "presentation": {
        "panel": "new",
        "group": "tools",
        "reveal": "always",
        "clear": true
      }
    },
    {
      "label": "Generate Worker V0 Types",
      "detail": "Generate Cloudflare types for v0 worker",
      "type": "shell",
      "command": "pnpm cf-typegen",
      "options": {
        "cwd": "${workspaceFolder}/apps/workers/v0"
      },
      "presentation": {
        "panel": "new",
        "group": "tools",
        "reveal": "always",
        "clear": true
      }
    },
    {
      "label": "Env: Generate",
      "detail": "Generate .env.example files across the repo",
      "type": "shell",
      "command": "pnpm env:generate",
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": [],
      "presentation": {
        "panel": "new",
        "group": "tools",
        "reveal": "always",
        "clear": true
      }
    },
    {
      "label": "Env: Bootstrap",
      "detail": "Sync local .env / .dev.vars and Wrangler vars (wrangler.jsonc)",
      "type": "shell",
      "command": "pnpm env:bootstrap",
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": [],
      "presentation": {
        "panel": "new",
        "group": "tools",
        "reveal": "always",
        "clear": true
      }
    },
    {
      "label": "Env: Sync Cloudflare Secrets (dry-run)",
      "detail": "Plan Cloudflare Worker secrets sync from env/.env (dry-run; add --apply to write)",
      "type": "shell",
      "command": "pnpm env:sync:cloudflare:secrets --target worker-v0 --env production",
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": [],
      "presentation": {
        "panel": "new",
        "group": "tools",
        "reveal": "always",
        "clear": true
      }
    },
    {
      "label": "Env: Sync Vercel Env (dry-run)",
      "detail": "Plan Vercel env sync from env/.env (dry-run; add --apply to write)",
      "type": "shell",
      "command": "pnpm env:sync:vercel --target production",
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": [],
      "presentation": {
        "panel": "new",
        "group": "tools",
        "reveal": "always",
        "clear": true
      }
    },
    {
      "label": "JWT: Mint",
      "detail": "Mint a JWT token (interactive) and optionally write to env/.env and env/.vars",
      "type": "shell",
      "command": "pnpm jwt:mint",
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": [],
      "presentation": {
        "panel": "new",
        "group": "tools",
        "reveal": "always",
        "clear": true,
        "focus": true
      }
    },
    {
      "label": "Changeset: Add",
      "detail": "Create a new changeset (select packages + bump type: patch/minor/major)",
      "type": "shell",
      "command": "pnpm changeset",
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": [],
      "presentation": {
        "panel": "new",
        "group": "release",
        "reveal": "always",
        "clear": true,
        "focus": true
      }
    },
    {
      "label": "Changeset: Status",
      "detail": "Show pending changesets and planned releases",
      "type": "shell",
      "command": "pnpm changeset status --verbose",
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": [],
      "presentation": {
        "panel": "new",
        "group": "release",
        "reveal": "always",
        "clear": true,
        "focus": true
      }
    },
    {
      "label": "SDK: Build (js-ts)",
      "detail": "Build the JS/TS SDK package (same as CI build step)",
      "type": "shell",
      "command": "pnpm sdk-ts:build",
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": [],
      "presentation": {
        "panel": "new",
        "group": "release",
        "reveal": "always",
        "clear": true,
        "focus": true
      }
    },
    {
      "label": "SDK: Test (js-ts)",
      "detail": "Run JS/TS SDK tests once (same as CI test step)",
      "type": "shell",
      "command": "pnpm --filter deepcrawl test -- --run",
      "group": {
        "kind": "test",
        "isDefault": true
      },
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": [],
      "presentation": {
        "panel": "new",
        "group": "release",
        "reveal": "always",
        "clear": true,
        "focus": true
      }
    }
  ]
}
